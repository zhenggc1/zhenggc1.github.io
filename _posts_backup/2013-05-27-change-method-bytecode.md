---
layout: post
title: "修改方法字节码"
description: ""
category: 
tags: ["转化字节码"]
---
{% include JB/setup %}

通过修改方法字节码的方式，可以实现对方法的修改，针对我们想要模拟一个应用的外围调用来说，可以简单的把需要处理的方法修改掉，把这个方法的类名，方法名，方法参数列表，以及放回值类型传递给一个特殊的工厂方法，然后把这个工厂方法的结果，返回给应用，实现模拟的效果。

做这个事情的时候，你会发现你要处理所有的方法的返回值，是一个大事情，这个时候，我想，如果可以对原来的请求先做一次录制，大概就可以不用做太多的返回值定义，至少可以在上面做少量修改即可。

为了这个录制，需要找到一个java对象序列化的组件，这个序列化组件是需要代码简单，纯文本的，有源码的，在有可能的情况下，需要修改源码来适应某些特殊的功能。

所有这个事情就分成了以下几个步骤

1. 录制请求
1. 修改相应的请求结果，以适应回放
1. 回放请求




